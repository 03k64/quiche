language: rust

dist: xenial

rust:
 - stable
 - beta
 - nightly

addons:
  apt:
    packages:
     - golang-go

script:
 - cargo build --verbose --all --examples
 - cargo test --verbose --all
 - cargo doc --no-deps

deploy:
  provider: pages
  fqdn: docs.quic.tech
  local-dir: target/debug/doc
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  on:
    branch: master
